# Overview

This repository holds the library to run the `Test Automation Tool` with JUnit. It is used to run scenarios automatically by using its API to call each scenario and validate them.

# Usage

## Setup

- Make sure the MicroEJ application can run JUnit tests, documentation how to do it can be found [here](https://docs.microej.com/en/latest/ApplicationDeveloperGuide/testsuite.html).
- Add the the dependency to your MicroEJ application's `module.ivy`:

```xml
   ...
   <dependency conf="test->*" org="ej.library.test" name="test-automation-junit" rev="1.0.0"/>
   ...
```

## Test Case

Add `setUp()` and `tearDown()` to the test case
 - on `setUp()` is needed to call the application's main method and interrupt the wait for it to be ready, this time is application dependent and the user should always be in charge of setting this timer(`TIME_TO_SETUP` on the example below);
 - on `tearDown()` is needed to to stop the application, this can be done by calling `MicroUI.stop()`.
 
Here's an example on how it should be:

```java

	...
	
	@Before
	public void setUp() throws Exception {
		Application.main(new String[0]);
		Thread.sleep(TIME_TO_SETUP);
	}

	@After
	public void tearDown() throws Exception {
		MicroUI.stop();
	}
	
	...

```

To call the `Test Automation Tool` scenario, on the test, call `TestScenario.fromFile(String filename)`, where `filename` is the name of the scenario folder, this method will return the the `TestScenario` with the following fields:
 - `success` is a boolean representing the result of the test, this can be checked with `assertTrue(instance.success)`;
 - `reportPath` is a String that represents the path of the `*.report` file generated by the test, this can be checked with `assertNotNull(instance.reportPath)`.
 - `causeOfFailure` is a String containing the cause of the failure in case `success` is false. This field has a null value otherwise.

```java
	...
	TestScenario testScenario = TestScenario.fromFile("20210927183355");
	Assert.assertTrue(testScenario.success);
	Assert.assertNotNull(testScenario.reportPath);
	...
```

# Requirements

 - Test Automation Tool 2.0.0.

# Dependencies

 - Java SE 8.
 - UI Pack 13.0.0 or higher.

# Restrictions

 - Cannot be used on embedded devices.
 - Cannot use the TestScenario.fromFile() function more than once per test case.

---

_Copyright 2021-2022 MicroEJ Corp. All rights reserved._
_Use of this source code is governed by a BSD-style license that can be found with this software._
